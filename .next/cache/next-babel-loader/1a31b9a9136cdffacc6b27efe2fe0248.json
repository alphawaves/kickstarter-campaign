{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar _jsxFileName = \"/home/sharan/kickstarter-campaign/pages/campaigns/new.js\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport { Form, Button, Input, Message } from \"semantic-ui-react\";\nimport factory from \"../../ethereum/factory\";\nimport web3 from \"../../ethereum/web3\";\nimport Router from 'next/router'; // class CampaignNew extends Component {\n//     render() {\n//         return (\n//             <div>\n//                 <h3>Create a Campaign</h3>\n//                 <Form>\n//                     <Form.Field>\n//                         <label>Minimum Contribution</label>\n//                         <Input label=\"wei\" labelPosition=\"right\" />\n//                     </Form.Field>\n//                     <Button primary>Create!</Button>\n//                 </Form>\n//             </div>\n//         )\n//     }\n// }\n\nvar CampaignNew = function CampaignNew() {\n  var _useState = useState(0),\n      minimumContribution = _useState[0],\n      setMinimumContribution = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      errorMessage = _useState2[0],\n      setErrorMessage = _useState2[1];\n\n  var _useState3 = useState(false),\n      loading = _useState3[0],\n      setLoading = _useState3[1];\n\n  var handleChange = function handleChange(e) {\n    setMinimumContribution(e.target.value);\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    var accounts;\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n            setErrorMessage('');\n            setLoading(true);\n            _context.prev = 3;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(web3.eth.getAccounts());\n\n          case 6:\n            accounts = _context.sent;\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(factory.methods.createCampaign(minimumContribution).send({\n              from: accounts[0]\n            }));\n\n          case 9:\n            Router.push('/');\n            _context.next = 15;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](3);\n            setErrorMessage(_context.t0.message);\n\n          case 15:\n            setLoading(false);\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[3, 12]]);\n  };\n\n  return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, __jsx(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, \"Create a Campaign\"), __jsx(Form, {\n    onSubmit: handleSubmit,\n    error: !!errorMessage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, __jsx(Form.Field, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, __jsx(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"Minimum Contribution\"), __jsx(Input, {\n    label: \"wei\",\n    labelPosition: \"right\",\n    value: minimumContribution,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  })), __jsx(Message, {\n    error: true,\n    header: \"Oops!\",\n    content: errorMessage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }), __jsx(Button, {\n    loading: loading,\n    primary: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Create!\")));\n};\n\nexport default CampaignNew;","map":{"version":3,"sources":["/home/sharan/kickstarter-campaign/pages/campaigns/new.js"],"names":["React","useState","Form","Button","Input","Message","factory","web3","Router","CampaignNew","minimumContribution","setMinimumContribution","errorMessage","setErrorMessage","loading","setLoading","handleChange","e","target","value","handleSubmit","preventDefault","eth","getAccounts","accounts","methods","createCampaign","send","from","push","message"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,IAAT,EAAeC,MAAf,EAAuBC,KAAvB,EAA8BC,OAA9B,QAA6C,mBAA7C;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,IAAP,MAAiB,qBAAjB;AACA,OAAOC,MAAP,MAAmB,aAAnB,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AAAA,kBAC8BR,QAAQ,CAAC,CAAD,CADtC;AAAA,MACjBS,mBADiB;AAAA,MACIC,sBADJ;;AAAA,mBAEgBV,QAAQ,CAAC,EAAD,CAFxB;AAAA,MAEjBW,YAFiB;AAAA,MAEHC,eAFG;;AAAA,mBAGMZ,QAAQ,CAAC,KAAD,CAHd;AAAA,MAGjBa,OAHiB;AAAA,MAGRC,UAHQ;;AAKxB,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD,EAAO;AAC1BN,IAAAA,sBAAsB,CAACM,CAAC,CAACC,MAAF,CAASC,KAAV,CAAtB;AACD,GAFD;;AAIA,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAAOH,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACjBA,YAAAA,CAAC,CAACI,cAAF;AACAR,YAAAA,eAAe,CAAC,EAAD,CAAf;AACAE,YAAAA,UAAU,CAAC,IAAD,CAAV;AAHiB;AAAA;AAAA,6CAMQR,IAAI,CAACe,GAAL,CAASC,WAAT,EANR;;AAAA;AAMTC,YAAAA,QANS;AAAA;AAAA,6CAQTlB,OAAO,CAACmB,OAAR,CAAgBC,cAAhB,CAA+BhB,mBAA/B,EAAoDiB,IAApD,CAAyD;AAC3DC,cAAAA,IAAI,EAAEJ,QAAQ,CAAC,CAAD;AAD6C,aAAzD,CARS;;AAAA;AAWfhB,YAAAA,MAAM,CAACqB,IAAP,CAAY,GAAZ;AAXe;AAAA;;AAAA;AAAA;AAAA;AAabhB,YAAAA,eAAe,CAAC,YAAEiB,OAAH,CAAf;;AAba;AAgBjBf,YAAAA,UAAU,CAAC,KAAD,CAAV;;AAhBiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAArB;;AAmBA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,EAEE,MAAC,IAAD;AAAM,IAAA,QAAQ,EAAEK,YAAhB;AAA8B,IAAA,KAAK,EAAE,CAAC,CAACR,YAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,EAEE,MAAC,KAAD;AACE,IAAA,KAAK,EAAC,KADR;AAEE,IAAA,aAAa,EAAC,OAFhB;AAGE,IAAA,KAAK,EAAEF,mBAHT;AAIE,IAAA,QAAQ,EAAEM,YAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,EAUE,MAAC,OAAD;AAAS,IAAA,KAAK,MAAd;AAAe,IAAA,MAAM,EAAC,OAAtB;AAA8B,IAAA,OAAO,EAAEJ,YAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,EAWE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAEE,OAAjB;AAA0B,IAAA,OAAO,MAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAXF,CAFF,CADF;AAkBD,CA9CD;;AAgDA,eAAeL,WAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { Form, Button, Input, Message } from \"semantic-ui-react\";\nimport factory from \"../../ethereum/factory\";\nimport web3 from \"../../ethereum/web3\";\nimport Router from 'next/router'\n\n// class CampaignNew extends Component {\n//     render() {\n//         return (\n//             <div>\n//                 <h3>Create a Campaign</h3>\n//                 <Form>\n//                     <Form.Field>\n//                         <label>Minimum Contribution</label>\n//                         <Input label=\"wei\" labelPosition=\"right\" />\n//                     </Form.Field>\n//                     <Button primary>Create!</Button>\n//                 </Form>\n//             </div>\n//         )\n//     }\n// }\n\nconst CampaignNew = () => {\n  const [minimumContribution, setMinimumContribution] = useState(0);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = (e) => {\n    setMinimumContribution(e.target.value);\n  }\n\n  const handleSubmit = async (e) => {\n      e.preventDefault();\n      setErrorMessage('');\n      setLoading(true);\n\n      try {\n        const accounts = await web3.eth.getAccounts();\n\n        await factory.methods.createCampaign(minimumContribution).send({\n            from: accounts[0]\n        });\n        Router.push('/')\n      } catch(e) {\n          setErrorMessage(e.message);\n      }\n\n      setLoading(false);\n  }\n\n  return (\n    <div>\n      <h3>Create a Campaign</h3>\n      <Form onSubmit={handleSubmit} error={!!errorMessage}>\n        <Form.Field>\n          <label>Minimum Contribution</label>\n          <Input\n            label=\"wei\"\n            labelPosition=\"right\"\n            value={minimumContribution}\n            onChange={handleChange}\n            />\n        </Form.Field>\n        <Message error header=\"Oops!\" content={errorMessage} />\n        <Button loading={loading} primary>Create!</Button>\n      </Form>\n    </div>\n  );\n};\n\nexport default CampaignNew;\n"]},"metadata":{},"sourceType":"module"}